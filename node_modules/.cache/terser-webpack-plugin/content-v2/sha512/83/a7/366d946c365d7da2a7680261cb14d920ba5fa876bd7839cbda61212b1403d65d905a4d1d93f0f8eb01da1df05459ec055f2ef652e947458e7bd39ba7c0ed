{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{241:function(t,a,s){\"use strict\";s.r(a);var n=s(0),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"使用spring-cloud-oauth-2-0实现服务身份校验\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#使用spring-cloud-oauth-2-0实现服务身份校验\"}},[t._v(\"#\")]),t._v(\" 使用Spring Cloud OAuth 2.0实现服务身份校验\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"oauth-2-0概念\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#oauth-2-0概念\"}},[t._v(\"#\")]),t._v(\" OAuth 2.0概念\")]),t._v(\" \"),s(\"p\",[s(\"a\",{attrs:{href:\"https://tools.ietf.org/html/draft-ietf-oauth-v2-31\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"OAuth2.0\"),s(\"OutboundLink\")],1)]),t._v(\" \"),s(\"p\",[s(\"a\",{attrs:{href:\"https://www.oauth.com/oauth2-servers/definitions/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"OAuth2-servers\"),s(\"OutboundLink\")],1)]),t._v(\" \"),s(\"p\",[s(\"a\",{attrs:{href:\"https://github.com/jeansfish/RFC6749.zh-cn\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"RFC 6749-OAuth 2.0授权框架\"),s(\"OutboundLink\")],1)]),t._v(\" \"),s(\"h3\",{attrs:{id:\"四种角色\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#四种角色\"}},[t._v(\"#\")]),t._v(\" 四种角色\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"p\",[t._v(\"资源拥有着\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"鉴权认证服务器\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"资源服务器\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"客户端\")])])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"四种授权模式\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#四种授权模式\"}},[t._v(\"#\")]),t._v(\" 四种授权模式\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"p\",[t._v(\"授权码模式\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"密码模式\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"客户端模式\")])]),t._v(\" \"),s(\"li\",[s(\"p\",[t._v(\"简单模式\")])])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"其他概念\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#其他概念\"}},[t._v(\"#\")]),t._v(\" 其他概念\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"EndPoint\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"spring-cloud-oauth-2-0\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#spring-cloud-oauth-2-0\"}},[t._v(\"#\")]),t._v(\" Spring Cloud OAuth 2.0\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"授权服务端配置\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#授权服务端配置\"}},[t._v(\"#\")]),t._v(\" 授权服务端配置\")]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"AuthorizationServer配置\")])]),t._v(\" \"),s(\"p\",[t._v(\"继承类\"),s(\"code\",[t._v(\"AuthorizationServerConfigurerAdapter\")]),t._v(\",重写以下方法，实现相应逻辑。\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[t._v(\"    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"configure\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"AuthorizationServerSecurityConfigurer\")]),t._v(\" security\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"configure\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"ClientDetailsServiceConfigurer\")]),t._v(\" clients\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//配置客户端认证\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"configure\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"AuthorizationServerEndpointsConfigurer\")]),t._v(\" endpoints\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//配置token的数据源、自定义的tokenServices等信息\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"configure\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"AuthorizationServerSecurityConfigurer\")]),t._v(\" oauthServer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//允许表单认证，默认为false\")]),t._v(\"\\n        oauthServer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"allowFormAuthenticationForClients\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"p\",[s(\"strong\",[t._v(\"WebSecurityConfigurer配置\")])]),t._v(\" \"),s(\"p\",[t._v(\"继承\"),s(\"code\",[t._v(\"WebSecurityConfigurerAdapter\")]),t._v(\"，重写以下三个方法。\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[t._v(\"    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"protected\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"configure\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"HttpSecurity\")]),t._v(\" http\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"configure\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"WebSecurity\")]),t._v(\" web\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"protected\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"configure\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"AuthenticationManagerBuilder\")]),t._v(\" auth\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"h3\",{attrs:{id:\"资源服务端配置\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#资源服务端配置\"}},[t._v(\"#\")]),t._v(\" 资源服务端配置\")]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"ResourceServerConfigurer配置\")])]),t._v(\" \"),s(\"p\",[t._v(\"继承\"),s(\"code\",[t._v(\"ResourceServerConfigurerAdapter\")]),t._v(\",重写以下方法：\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[t._v(\"    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Override\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"configure\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"HttpSecurity\")]),t._v(\" http\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"throws\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),s(\"h2\",{attrs:{id:\"参考\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考\"}},[t._v(\"#\")]),t._v(\" 参考\")]),t._v(\" \"),s(\"p\",[s(\"a\",{attrs:{href:\"https://github.com/spring-projects/spring-security-oauth\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"spring-security-oauth\"),s(\"OutboundLink\")],1)]),t._v(\" \"),s(\"p\",[s(\"a\",{attrs:{href:\"http://www.iocoder.cn/Spring-Security/OAuth2-learning/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"芋道 Spring Security OAuth2 入门\"),s(\"OutboundLink\")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);","extractedComments":[]}